@page "/check-out"
@using Shopularity.Public.Pages
@using Shopularity.Basket.Services
@using Shopularity.Catalog.Products
@using Shopularity.Catalog.Products.Public
@using Shopularity.Localization
@using Shopularity.Public.Components.Basket
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Alert
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Form
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Grid
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.ListGroup
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.AspNetCore.Mvc.TagHelpers
@inject IHtmlLocalizer<ShopularityResource> L
@model CheckOutModel

<div>
    <h2>@L["Items"]</h2>
    <abp-list-group>
        @foreach (var item in Model.Items)
        {
            <abp-list-group-item>
                <abp-row>
                    <abp-column size="_6">
                        @if (item.Product.Image != null && item.Product.Image.Length != 0)
                        {
                            <img src="data:image/png;base64,@Convert.ToBase64String(item.Product.Image)" style="width: 80px; height: auto; margin-right: 15px; border-radius: 4px;" alt="@item.Product.Name"/>
                        }
                    </abp-column>
                    <abp-column size="_6">
                        <h3>@item.Product.Name</h3>
                        <span>@L["Price"]: @item.Product.Price</span>
                        <span>@L["Amount"]: @item.Amount</span>
                    </abp-column>
                </abp-row>
            </abp-list-group-item>
        }
    </abp-list-group>
    <span class="fw-semibold">@L["TotalPrice"]</span>
    <span class="fw-bold">$@Model.TotalPrice.ToString("F2")</span>
    
    <form method="post">
        <abp-input asp-for="CacheId"/>
        <abp-input asp-for="CreditCardNumber" info="@L["FakeCreditCardInfo"].Value"/>
        <abp-input asp-for="Address"/>
        <abp-button button-type="Success" type="submit">@L["CompleteOrder"]</abp-button>
    </form>
</div>